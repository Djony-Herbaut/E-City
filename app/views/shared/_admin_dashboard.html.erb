<h1>Panel Admin – Requêtes</h1>

<h2>⏳ Requêtes en attente</h2>
<% if @pending_objets.any? %>
  <% @pending_objets.each do |objet| %>
    <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 10px;">
      <h3><%= objet.titre %></h3>
      <p><%= objet.description %></p>
      <% if objet.image.attached? %>
        <%= image_tag objet.image.variant(resize_to_limit: [300, 200]) %>
      <% end %>

      <%= form_with url: admin_objet_connecte_path(objet), method: :patch, local: true, data: { turbo: false } do %>
        <%= submit_tag "Valider", name: "commit" %>
        <%= submit_tag "Rejeter", name: "commit" %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>Aucune requête en attente.</p>
<% end %>

<h2>✅ Objets approuvés</h2>
<% if @approved_objets.any? %>
  <% @approved_objets.each do |objet| %>
    <div style="border: 1px solid #cfc; padding: 10px; margin-bottom: 10px;">
      <h3><%= objet.titre %></h3>
      <p><%= objet.description %></p>
      <% if objet.image.attached? %>
        <%= image_tag objet.image.variant(resize_to_limit: [300, 200]) %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>Aucun objet approuvé.</p>
<% end %>

<h2>❌ Objets refusés</h2>
<% if @rejected_objets.any? %>
  <% @rejected_objets.each do |objet| %>
    <div style="border: 1px solid #fcc; padding: 10px; margin-bottom: 10px;">
      <h3><%= objet.titre %></h3>
      <p><%= objet.description %></p>
      <% if objet.image.attached? %>
        <%= image_tag objet.image.variant(resize_to_limit: [300, 200]) %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>Aucun objet refusé.</p>
<% end %>
